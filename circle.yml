machine:
  python:
    version: 3.4.3
  pre:
    - sudo apt-get install -y erlang-nox init-system-helpers socat adduser logrotate
    - sudo curl -o rabbitmq-server_3.6.5-1_all.deb https://www.rabbitmq.com/releases/rabbitmq-server/v3.6.5/rabbitmq-server_3.6.5-1_all.deb
    - sudo dpkg -i rabbitmq-server_3.6.5-1_all.deb
    - sudo rabbitmq-plugins enable rabbitmq_management
    - sudo /etc/init.d/rabbitmq-server restart

dependencies:
  pre:
    - pip install -U pip setuptools tox
    - pip install -e ".[dev]"
    - pyenv local 2.7.10 3.3.6 3.4.3

test:
    override:
      - tox
